<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban + Calendar Board</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
</head>
<body>
    <header>
        <h1>ğŸ“Š Kanban + Calendar Board</h1>
        <div class="header-actions">
            <button id="toggleViewBtn" class="btn-secondary">ğŸ“… ë‹¬ë ¥ ë³´ê¸°/ìˆ¨ê¸°ê¸°</button>
            <button id="addCardBtn" class="btn-primary">+ ìƒˆ ì¹´ë“œ ì¶”ê°€</button>
        </div>
    </header>

<!-- ë‹¬ë ¥ ì„¹ì…˜ -->
<section id="calendarSection" class="calendar-section">
    <div class="calendar-header">
        <button id="prevMonth" class="btn-month">â—€</button>
        <h2 id="currentMonth"></h2>
        <button id="nextMonth" class="btn-month">â–¶</button>
        
        <!-- â­ ì´ ë¶€ë¶„ì„ ì¶”ê°€í•˜ì„¸ìš” -->
        <div class="view-controls">
            <button id="monthViewBtn" class="view-btn active">ì›”ë³„</button>
            <button id="weekViewBtn" class="view-btn">ì£¼ë³„</button>
        </div>
    </div>
    <div class="calendar-grid" id="calendarGrid">
        <div class="calendar-day-header">ì¼</div>
        <div class="calendar-day-header">ì›”</div>
        <div class="calendar-day-header">í™”</div>
        <div class="calendar-day-header">ìˆ˜</div>
        <div class="calendar-day-header">ëª©</div>
        <div class="calendar-day-header">ê¸ˆ</div>
        <div class="calendar-day-header">í† </div>
    </div>
</section>


    <!-- ì¹¸ë°˜ ë³´ë“œ ì„¹ì…˜ -->
    <section class="kanban-section">
        <div class="kanban-container">
            <div class="kanban-column">
                <h2>ğŸ“ To Do</h2>
                <div class="cards-container" id="todo-cards" data-column="todo"></div>
            </div>
            <div class="kanban-column">
                <h2>ğŸš€ In Progress</h2>
                <div class="cards-container" id="in_progress-cards" data-column="in_progress"></div>
            </div>
            <div class="kanban-column">
                <h2>âœ… Done</h2>
                <div class="cards-container" id="done-cards" data-column="done"></div>
            </div>
        </div>
    </section>

    <!-- ì¹´ë“œ ì¶”ê°€ ëª¨ë‹¬ -->
    <div id="cardModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>ìƒˆ ì¹´ë“œ ì¶”ê°€</h2>
            <form id="cardForm">
                <input type="text" id="title" placeholder="ì œëª©" required>
                <textarea id="description" placeholder="ì„¤ëª…"></textarea>
                <input type="text" id="gitIssue" placeholder="Git ì´ìŠˆ ë²ˆí˜¸ (ì˜ˆ: #123, GH-456)">
                <input type="text" id="assignee" placeholder="ë‹´ë‹¹ì">
                <input type="text" id="label" placeholder="ë¼ë²¨">

                <select id="issueType" required>
                    <option value="story">ğŸ“– Story</option>
                    <option value="task">âœ… Task</option>
                    <option value="bug">ğŸ› Bug</option>
                </select>

                <select id="priority" required>
                    <option value="highest">ğŸ”´ Highest</option>
                    <option value="high">ğŸŸ  High</option>
                    <option value="medium" selected>ğŸŸ¡ Medium</option>
                    <option value="low">ğŸŸ¢ Low</option>
                    <option value="lowest">ğŸ”µ Lowest</option>
                </select>

                <input type="date" id="dueDate" placeholder="ë§ˆê°ì¼">

                <select id="columnName" required>
                    <option value="todo">To Do</option>
                    <option value="in_progress">In Progress</option>
                    <option value="done">Done</option>
                </select>

                <button type="submit" class="btn-primary">ì¶”ê°€</button>
            </form>
        </div>
    </div>

    <!-- ì¹´ë“œ ìƒì„¸ ëª¨ë‹¬ -->
    <div id="detailModal" class="modal">
        <div class="modal-content modal-large">
            <span class="close" id="closeDetail">&times;</span>
            <div id="detailContent"></div>
        </div>
    </div>

    <script>
        // Supabase í™˜ê²½ë³€ìˆ˜ (ë°±ì—”ë“œì—ì„œ ì „ë‹¬)
        window.SUPABASE_URL = "{{ supabase_url }}";
        window.SUPABASE_KEY = "{{ supabase_key }}";
    </script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>